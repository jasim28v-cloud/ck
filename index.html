<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>SHΔDØW | THE ULTIMATE TITAN 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://upload-widget.cloudinary.com/global/all.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Cairo:wght@300;900&display=swap');
        
        :root { --primary: #00f3ff; --secondary: #ff0055; --bg: #020202; }
        body { background: var(--bg); color: #fff; font-family: 'Cairo', sans-serif; overflow: hidden; height: 100vh; }

        /* خلفية جزيئات النيون */
        .hero-bg { position: fixed; inset: 0; z-index: -1; background: radial-gradient(circle at 50% 50%, #0a0f1a 0%, #000 100%); }
        .hero-bg::after { content: ''; position: absolute; inset: 0; background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); opacity: 0.1; }

        /* الهيكل العملاق */
        .titan-grid { display: grid; grid-template-columns: 100px 320px 1fr 320px; height: 100vh; gap: 0; }

        /* الألواح الزجاجية الفاخرة */
        .glass-sidebar { background: rgba(255, 255, 255, 0.01); backdrop-filter: blur(50px); border-left: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; align-items: center; padding: 40px 0; z-index: 10; }
        .glass-panel { background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(30px); border-right: 1px solid rgba(255,255,255,0.05); padding: 30px; display: flex; flex-direction: column; }

        /* شبكة الفيديوهات الضخمة */
        .main-display { padding: 40px; overflow-y: auto; scrollbar-width: none; background: linear-gradient(to bottom, transparent, rgba(0,243,255,0.02)); }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }

        /* كرت الفيديو "التيتان" */
        .titan-card { position: relative; aspect-ratio: 16/10; background: #000; border-radius: 30px; border: 1px solid rgba(255,255,255,0.05); overflow: hidden; transition: 0.7s cubic-bezier(0.2, 1, 0.2, 1); box-shadow: 0 20px 50px rgba(0,0,0,0.5); cursor: pointer; }
        .titan-card:hover { transform: scale(1.05) translateY(-10px); border-color: var(--primary); box-shadow: 0 0 40px rgba(0, 243, 255, 0.2); }
        
        video { width: 100%; height: 100%; object-fit: cover; filter: grayscale(40%); transition: 0.5s; }
        .titan-card:hover video { filter: grayscale(0%); transform: scale(1.1); }

        /* تفاصيل الكرت */
        .card-info { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 50%); display: flex; flex-direction: column; justify-content: flex-end; padding: 25px; opacity: 0; transition: 0.4s; }
        .titan-card:hover .card-info { opacity: 1; }

        /* الأزرار الذكية */
        .btn-glow { background: rgba(255,255,255,0.05); width: 60px; height: 60px; border-radius: 20px; display: flex; align-items: center; justify-content: center; transition: 0.3s; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); }
        .btn-glow:hover { background: var(--primary); color: #000; box-shadow: 0 0 25px var(--primary); transform: rotate(-5deg); }
        
        .upload-giant { background: linear-gradient(45deg, var(--primary), #0077ff); color: #000; font-family: 'Orbitron'; font-weight: 900; padding: 20px; border-radius: 25px; text-align: center; cursor: pointer; transition: 0.5s; box-shadow: 0 10px 30px rgba(0, 243, 255, 0.3); }
        .upload-giant:hover { letter-spacing: 3px; transform: scale(1.02); box-shadow: 0 0 50px var(--primary); }

        /* شعار البرق */
        .logo-vertical { font-family: 'Orbitron'; font-weight: 900; font-size: 20px; letter-spacing: 10px; writing-mode: vertical-rl; text-transform: uppercase; color: var(--primary); text-shadow: 0 0 20px var(--primary); }
    </style>
</head>
<body>

    <div class="hero-bg"></div>

    <div class="titan-grid">
        <aside class="glass-sidebar">
            <div class="logo-vertical mb-20">SHΔDØW</div>
            <div class="flex flex-col gap-8">
                <div class="btn-glow" onclick="openAd()"><i class="fas fa-home"></i></div>
                <div class="btn-glow" onclick="openAd()"><i class="fas fa-compass"></i></div>
                <div class="btn-glow" onclick="openAd()"><i class="fas fa-crown text-yellow-500"></i></div>
                <div class="btn-glow" onclick="openAd()"><i class="fas fa-user-shield"></i></div>
            </div>
        </aside>

        <section class="glass-panel">
            <div class="mb-10">
                <h3 class="text-[10px] font-[Orbitron] opacity-40 mb-2">SYSTEM_STATUS</h3>
                <div class="flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-xs font-bold">CORE_CONNECTED</span>
                </div>
            </div>

            <div class="space-y-6">
                <h3 class="text-[10px] font-[Orbitron] opacity-40">COMMUNITY_FEED</h3>
                <div id="mini-chat" class="space-y-4 h-[300px] overflow-y-auto pr-2 opacity-60 text-xs">
                    <div class="p-3 bg-white/5 rounded-xl border-r-2 border-cyan-500">مرحباً بك في نظام تيتان..</div>
                </div>
            </div>

            <div class="mt-auto">
                <div class="upload-giant" id="mega-upload">
                    <i class="fas fa-cloud-arrow-up mr-2"></i> UPLOAD_DATA
                </div>
            </div>
        </section>

        <main class="main-display">
            <header class="flex justify-between items-center mb-12">
                <div>
                    <h1 class="text-4xl font-black italic tracking-tighter">EXPLORE <span class="text-cyan-400">TITAN</span></h1>
                    <p class="text-xs opacity-40 font-[Orbitron]">TOTAL_ENCRYPTED_ARCHIVE_v9.2</p>
                </div>
                <div class="flex gap-4">
                    <div class="px-6 py-3 bg-white/5 rounded-full border border-white/10 text-xs font-bold" id="user-id">ID: ----</div>
                </div>
            </header>

            <div class="video-grid" id="titan-grid">
                <div class="col-span-full py-40 text-center">
                    <i class="fas fa-atom fa-spin text-6xl text-cyan-500 opacity-20"></i>
                </div>
            </div>
        </main>

        <section class="glass-panel border-r-0 border-l border-white/5">
            <h3 class="text-[10px] font-[Orbitron] opacity-40 mb-6">GLOBAL_RECORDS</h3>
            <div class="space-y-4">
                <div class="p-5 bg-gradient-to-br from-white/5 to-transparent rounded-3xl border border-white/5 hover:border-cyan-500/30 transition cursor-pointer" onclick="openAd()">
                    <div class="text-[10px] opacity-50 mb-1">MOST_VIEWED_PROTOCOL</div>
                    <div class="text-xl font-black text-cyan-400">#SHΔDØW_TOP</div>
                </div>
                <div class="p-5 bg-gradient-to-br from-white/5 to-transparent rounded-3xl border border-white/5">
                    <div class="text-[10px] opacity-50 mb-1">NETWORK_TRAFFIC</div>
                    <div class="text-xl font-black">99.9% UPTIME</div>
                </div>
            </div>
        </section>
    </div>

    <script>
        const SHADOW_ID = localStorage.getItem('shadow_uid') || 'TITAN_' + Math.random().toString(36).substr(2, 5).toUpperCase();
        localStorage.setItem('shadow_uid', SHADOW_ID);
        document.getElementById('user-id').innerText = `ID: ${SHADOW_ID}`;

        const firebaseConfig = { databaseURL: "https://project-717e4-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // نظام الإعلانات المزدوج المطور
        const AD_LINKS = [
            "https://www.effectivegatecpm.com/k60w64w4gk?key=564f3d8cc4ac85949f218179b742495e",
            "https://www.effectivegatecpm.com/bxwxuk2f39?key=566216691dc8b76a740840e94f68f44c"
        ];
        let adToggle = 0;
        function openAd() {
            window.open(AD_LINKS[adToggle], '_blank');
            adToggle = (adToggle + 1) % AD_LINKS.length;
        }

        const CLOUD_NAME = "dssk5tabb", UPLOAD_PRESET = "bjebvo5p";
        const myWidget = cloudinary.createUploadWidget({ cloudName: CLOUD_NAME, uploadPreset: UPLOAD_PRESET }, (err, res) => {
            if (!err && res.event === "success") {
                db.ref('videos/').push({ url: res.info.secure_url, sender: SHADOW_ID, likes: 0, timestamp: Date.now() });
                openAd();
            }
        });
        document.getElementById("mega-upload").onclick = () => { openAd(); myWidget.open(); };

        // جلب الفيديوهات للشبكة الضخمة
        db.ref('videos').on('value', (snapshot) => {
            const grid = document.getElementById('titan-grid');
            const data = snapshot.val();
            if(!data) return;
            grid.innerHTML = '';
            Object.keys(data).reverse().forEach(id => {
                const vid = data[id];
                const card = document.createElement('div');
                card.className = 'titan-card';
                card.onclick = openAd;
                card.innerHTML = `
                    <video loop muted onmouseover="this.play()" onmouseout="this.pause(); this.currentTime=0" src="${vid.url}"></video>
                    <div class="card-info">
                        <div class="flex justify-between items-end">
                            <div>
                                <div class="text-[10px] font-[Orbitron] text-cyan-400">ENCRYPTED_USER</div>
                                <div class="font-black text-lg">@${vid.sender}</div>
                            </div>
                            <div class="flex flex-col items-center gap-2" onclick="event.stopPropagation(); toggleLike('${id}')">
                                <i class="fas fa-heart text-2xl text-red-500 shadow-lg"></i>
                                <span class="text-xs font-bold">${vid.likes || 0}</span>
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        });

        function toggleLike(id) {
            openAd();
            db.ref(`videos/${id}`).transaction(p => { if(p) p.likes = (p.likes || 0) + 1; return p; });
        }

        // تحديث الدردشة البسيطة في الجانب
        db.ref('global_chat').limitToLast(10).on('value', s => {
            const chat = document.getElementById('mini-chat');
            chat.innerHTML = '';
            const val = s.val();
            if(val) Object.values(val).forEach(m => {
                const msg = document.createElement('div');
                msg.className = 'p-3 bg-white/5 rounded-xl border-r-2 border-cyan-500';
                msg.innerHTML = `<span class="text-cyan-400 font-bold block">${m.user}</span> ${m.text}`;
                chat.appendChild(msg);
            });
            chat.scrollTop = chat.scrollHeight;
        });
    </script>
</body>
</html>
